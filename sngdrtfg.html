<!DOCTYPE html>
<html>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script type="text/javascript" src="util/messagingUtil.js"></script>
<body>
<center>
<div id="myPlot" style="width:100%;max-width:700px"></div>
</center>
<script>
   //get column in javascript... 

   function getCol(matrix, col){
       var column = [];
       for(var i=0; i<matrix.length; i++){
          column.push(matrix[i][col]);
       }
       return column; // return column data..
       }

  va.messagingUtil.setOnDataReceivedCallback(update_variable);

// id
  function update_variable(vaMsgObj1)
  {
    if (vaMsgObj1 && vaMsgObj1.data && vaMsgObj1.rowCount >1) 
      {  
         var var1=getCol(vaMsgObj1.data, 0);  //id
         var var2=getCol(vaMsgObj1.data, 1);  // labels
         var var3=getCol(vaMsgObj1.data, 2);  //  parents
      }
    else 
      {
       var var1=null;
       var var2=null;
       var var3=null;
      }
  }
  var data = [{
        type: "sunburst",
        maxdepth: 2,
        ids: var1,
        labels: var2,
        parents: var3,
        textposition: 'inside',
        insidetextorientation: 'radial'
  }] ;

  var layout = {margin: {l: 0, r: 0, b: 0, t:0}} ;

  Plotly.newPlot('myPlot', data, layout);
</script>

</body>
</html>
